{% extends "base.html" %}
{% block title %}Records{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
{% endblock %}

{% block content %}
<div class="container-fluid py-3 flex-grow-1">
  <div class="info-box">
    <h3 class="fw-bold text-start mb-4">
      <i class="bi bi-clock-history me-2"></i> Drying History
    </h3>

    {% if records %}
    <div class="table-responsive">
      <table class="table table-bordered align-middle text-center">
        <thead style="background-color: #355B25; color: white;">
          <tr>
            <th>Batch Name</th>
            <th>Due Date</th>
            <th>Date Planted</th>
            <th>Date Harvested</th>
            <th>Date Dried</th>
            <th>Initial Weight</th>
            <th>Final Weight</th>
            <th>Initial MC</th>
            <th>Final MC</th>
            <th>Temperature</th>
            <th>Humidity</th>
            <th>Drying Time</th>
          </tr>
        </thead>
        <tbody>
          {% for r in records %}
          <tr>
            <td>{{ r.batch_name }}</td>
            <td>{{ r.shelf_life }}</td>
            <td>{{ r.date_planted.strftime('%Y-%m-%d') if r.date_planted else '—' }}</td>
            <td>{{ r.date_harvested.strftime('%Y-%m-%d') if r.date_harvested else '—' }}</td>
            <td>{{ r.date_dried.strftime('%Y-%m-%d') if r.date_dried else '—' }}</td>
            <td>{{ r.initial_weight }} kg</td>
            <td>{{ r.final_weight }} kg</td>
            <td>{{ r.initial_moisture }}%</td>
            <td>{{ r.final_moisture }}%</td>
            <td>{{ r.temperature }}°C</td>
            <td>{{ r.humidity }}%</td>
            <td>{{ r.drying_time }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p class="text-center">No drying records available.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
